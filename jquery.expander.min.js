!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&"object"==typeof module.exports?module.exports=e:e(jQuery)}(function(Q){Q.expander={version:"2.0.2",defaults:{slicePoint:100,sliceOn:null,preserveWords:!0,normalizeWhitespace:!0,showWordCount:!1,detailPrefix:" ",wordCountText:" ({{count}} words)",widow:4,expandText:"read more",expandPrefix:"&hellip; ",expandAfterSummary:!1,wordEnd:/(&(?:[^;]+;)?|[0-9a-zA-Z\u00C0-\u0100]+|[^\u0000-\u007F]+)$/,summaryClass:"summary",detailClass:"details",moreClass:"read-more",lessClass:"read-less",moreLinkClass:"more-link",lessLinkClass:"less-link",collapseTimer:0,expandEffect:"slideDown",expandSpeed:250,collapseEffect:"slideUp",collapseSpeed:200,userCollapse:!0,userCollapseText:"read less",userCollapsePrefix:" ",onSlice:null,beforeExpand:null,afterExpand:null,onCollapse:null,afterCollapse:null}},Q.fn.expander=function(e){var a="init";"string"==typeof e&&(a=e,e={});var D,I=Q.extend({},Q.expander.defaults,e),$=/^<(?:area|br|col|embed|hr|img|input|link|meta|param).*>$/i,l=I.wordEnd,A=/<\/?(\w+)[^>]*>/g,W=/<(\w+)[^>]*>/g,z=/<\/(\w+)>/g,F=/(<\/([^>]+)>)\s*$/,H=/^(<[^>]+>)+.?/,U=/\s\s+/g,s={init:function(){this.each(function(){var e,a,l,s,n,t,r,i,o,d,c,p,f,u,m,x,h=[],C=[],v={},y=this,g=Q(this),w=Q([]),E=Q.extend({},I,g.data("expander")||Q.meta&&g.data()||{}),T=!!g.find("."+E.detailClass).length,S=!!g.find("*").filter(function(){var e=Q(this).css("display");return/^block|table|list/.test(e)}).length,b=(S?"div":"span")+"."+E.detailClass,k=E.moreClass+"",P=E.lessClass+"",O=E.expandSpeed||0,j=(x=g.html(),I.normalizeWhitespace?x.trim().replace(U," "):x),L=j.slice(0,E.slicePoint);if(E.moreSelector="span."+k.split(" ").join("."),E.lessSelector="span."+P.split(" ").join("."),!Q.data(this,"expanderInit")){for(Q.data(this,"expanderInit",!0),Q.data(this,"expander",E),Q.each(["onSlice","beforeExpand","afterExpand","onCollapse","afterCollapse"],function(e,a){v[a]=Q.isFunction(E[a])}),n=(L=q(L)).replace(A,"").length;n<E.slicePoint;)"<"===(s=j.charAt(L.length))&&(s=j.slice(L.length).match(H)[0]),L+=s,n++;for(E.sliceOn&&(L=function(e){var a="ExpandMoreHere374216623",l=e.summaryText.replace(e.sliceOn,a),s=(l=Q("<div>"+l+"</div>").text()).indexOf(a),n=e.summaryText.indexOf(e.sliceOn);-1!==s&&s<e.slicePoint&&(e.summaryText=e.allHtml.slice(0,n));return e}({sliceOn:E.sliceOn,slicePoint:E.slicePoint,allHtml:j,summaryText:L}).summaryText),t=(L=q(L,E.preserveWords&&j.slice(L.length).length)).match(W)||[],r=L.match(z)||[],l=[],Q.each(t,function(e,a){$.test(a)||l.push(a)}),t=l,a=r.length,e=0;e<a;e++)r[e]=r[e].replace(z,"$1");if(Q.each(t,function(e,a){var l=a.replace(W,"$1"),s=Q.inArray(l,r);-1===s?(h.push(a),C.push("</"+l+">")):r.splice(s,1)}),C.reverse(),T)o=g.find(b).remove().html(),j=(L=g.html())+o,i="";else{if(""===(d=(o=j.slice(L.length)).replace(A,"").trim())||d.split(/\s+/).length<E.widow)return;i=C.pop()||"",L+=C.join(""),o=h.join("")+o}E.moreLabel=g.find(E.moreSelector).length?"":function(e,a){var l='<span class="'+e.moreClass+'">'+e.expandPrefix;e.showWordCount?e.wordCountText=e.wordCountText.replace(/\{\{count\}\}/,a.replace(A,"").replace(/\&(?:amp|nbsp);/g,"").replace(/(?:^\s+|\s+$)/,"").match(/\w+/g).length):e.wordCountText="";return l+='<a href="#" class="'+e.moreLinkClass+'">'+e.expandText+e.wordCountText+"</a></span>"}(E,o),S?o=j:"&"===L.charAt(L.length-1)&&(m=/^[#\w\d\\]+;/.exec(o))&&(o=o.slice(m[0].length),L+=m[0]),L+=i,E.summary=L,E.details=o,E.lastCloseTag=i,v.onSlice&&(E=(l=E.onSlice.call(y,E))&&l.details?l:E),c=function(e,a){var l="span",s=e.summary,n=F.exec(s),t=n?n[2].toLowerCase():"";a?(l="div",n&&"a"!==t&&!e.expandAfterSummary?s=s.replace(F,e.moreLabel+"$1"):s+=e.moreLabel,s='<div class="'+e.summaryClass+'">'+s+"</div>"):s+=e.moreLabel;return[s,e.detailPrefix||"","<",l+' class="'+e.detailClass+'"',">",e.details,"</"+l+">"].join("")}(E,S),g.empty().append(c),f=g.find(b),u=g.find(E.moreSelector),"slideUp"===E.collapseEffect&&"slideDown"!==E.expandEffect||g.is(":hidden")?f.css({display:"none"}):f[E.collapseEffect](0),w=g.find("div."+E.summaryClass),p=function(e){e.preventDefault();var a=e.startExpanded?0:O;u.hide(),w.hide(),v.beforeExpand&&E.beforeExpand.call(y),f.stop(!1,!0)[E.expandEffect](a,function(){var e,a,l;f.css({zoom:""}),v.afterExpand&&E.afterExpand.call(y),a=f,l=y,(e=E).collapseTimer&&(D=setTimeout(function(){M(e,a),Q.isFunction(e.onCollapse)&&e.onCollapse.call(l,!1)},e.collapseTimer))})},u.find("a").off("click.expander").on("click.expander",p),E.userCollapse&&!g.find(E.lessSelector).length&&g.find(b).append('<span class="'+E.lessClass+'">'+E.userCollapsePrefix+'<a href="#" class="'+E.lessLinkClass+'">'+E.userCollapseText+"</a></span>"),g.find(E.lessSelector+" a").off("click.expander").on("click.expander",function(e){e.preventDefault(),clearTimeout(D);var a=Q(this).closest(b);M(E,a),v.onCollapse&&E.onCollapse.call(y,!0)}),E.startExpanded&&p({preventDefault:function(){},startExpanded:!0})}})},destroy:function(){this.each(function(){var e,a,l=Q(this);l.data("expanderInit")&&(e=Q.extend({},l.data("expander")||{},I),a=l.find("."+e.detailClass).contents(),l.removeData("expanderInit"),l.removeData("expander"),l.find(e.moreSelector).remove(),l.find("."+e.summaryClass).remove(),l.find("."+e.detailClass).after(a).remove(),l.find(e.lessSelector).remove())})}};function q(e,a){return e.lastIndexOf("<")>e.lastIndexOf(">")&&(e=e.slice(0,e.lastIndexOf("<"))),a&&(e=e.replace(l,"")),e.trim()}function M(e,a){a.stop(!0,!0)[e.collapseEffect](e.collapseSpeed,function(){a.prev("span."+e.moreClass).show().length||a.parent().children("div."+e.summaryClass).show().find("span."+e.moreClass).show(),e.afterCollapse&&e.afterCollapse.call(a)})}return s[a]&&s[a].call(this),this},Q.fn.expander.defaults=Q.expander.defaults});